# Руководство по локализации

В этой директории находятся все файлы локализации для PortProtonQT. Переводы управляются с помощью Babel и хранятся в файлах `.po` внутри папки `LC_MESSAGES` для каждой локали.

## Статус перевода

<!-- Сгенерировано автоматически! -->

| Локаль | Прогресс | Переведено |
| :----- | -------: | ---------: |
| [de_DE](./de_DE/LC_MESSAGES/messages.po) | 0% | 0 из 65 |
| [es_ES](./es_ES/LC_MESSAGES/messages.po) | 0% | 0 из 65 |
| [ru_RU](./ru_RU/LC_MESSAGES/messages.po) | 100% | 65 из 65 |

## Добавление нового перевода

Чтобы создать перевод для нового языка, выполните следующие шаги:

1. **Инициализация нового перевода**

   Из корня проекта выполните команду:

   ```bash
   uv sync --all-extras --dev
   source .venv/bin/activate
   python dev-scripts/l10n.py --create-new <код_локали>
   ```

Замените `<код_локали>` на нужный код локали (например, `ru_RU` для русского или `de_DE` для немецкого).

2. **Редактирование файла перевода**

   Команда создаст новую директорию для указанной локали в папке locales со структурой:

   `<код_локали>/LC_MESSAGES/messages.po`

   Откройте полученный файл messages.po в текстовом редакторе или специальной программе (например, Poedit) и добавьте или исправьте переводы.

## 1. Обновление существующих переводов

Если вы внесли изменения в исходный код или добавили новые строки для перевода, выполните следующие действия:

### 1. Извлечение строк из исходного кода

Выполните команду:

```bash
uv sync --all-extras --dev
source .venv/bin/activate
python dev-scripts/l10n.py --update-all
```

Эта команда:

- Извлекает переводимые строки из исходников, расположенных в папке `portprotonqt`.
- Генерирует или обновляет файл `messages.pot` в директории локалей.
- Обновляет все существующие файлы `.po` новыми или изменёнными строками.

### 2. Компиляция переводов

После обновления выполните команду:

```bash
uv sync --all-extras --dev
source .venv/bin/activate
python dev-scripts/l10n.py
```

Эта команда компилирует файлы `.po` в `.mo`, которые используются во время работы приложения.
